(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["products"],{"7f7f":function(t,e,o){var s=o("86cc").f,i=Function.prototype,a=/^\s*function ([^ (]*)/,c="name";c in i||o("9e1e")&&s(i,c,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},d2f1:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",[o("div",[o("b-row",{staticClass:"row"},[t.isAdmin?o("b-col",{staticClass:"col-3",staticStyle:{margin:"50px"}},[o("h3",[t._v("Add Product")]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"productname"}},[t._v("Product Name")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.product.name,expression:"product.name"}],staticClass:"form-control",attrs:{type:"text",id:"productname",placeholder:"Enter name"},domProps:{value:t.product.name},on:{input:function(e){e.target.composing||t.$set(t.product,"name",e.target.value)}}}),o("br")]),o("div",{staticClass:"form-group"},["add"===t.mode?o("label",{attrs:{for:"addproductimage"}},[t._v("Add Product Image")]):t._e(),"upd"===t.mode?o("label",{attrs:{for:"addproductimage"}},[t._v("Change Product Image")]):t._e(),o("input",{staticClass:"form-control",attrs:{type:"file",id:"addproductimage"},on:{change:t.previewFile}}),o("br")]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"productprice"}},[t._v("Product Price")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.product.price,expression:"product.price"}],staticClass:"form-control",attrs:{type:"number",id:"productprice",placeholder:"Enter price"},domProps:{value:t.product.price},on:{input:function(e){e.target.composing||t.$set(t.product,"price",e.target.value)}}}),o("br")]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"productstock"}},[t._v("Product Stock")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.product.stock,expression:"product.stock"}],staticClass:"form-control",attrs:{type:"number",id:"productstock",placeholder:"Enter stock",min:"1",max:"20"},domProps:{value:t.product.stock},on:{input:function(e){e.target.composing||t.$set(t.product,"stock",e.target.value)}}}),o("br")]),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"description"}},[t._v("Description")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.product.description,expression:"product.description"}],attrs:{id:"description",placeholder:"product description"},domProps:{value:t.product.description},on:{input:function(e){e.target.composing||t.$set(t.product,"description",e.target.value)}}}),o("br")]),o("div",{staticClass:"form-group"},["add"===t.mode?o("button",{staticClass:"btn btn-outline-secondary btn-sm btn-block",attrs:{type:"button"},on:{click:t.newProduct}},[t._v("Upload")]):t._e(),"upd"===t.mode?o("button",{staticClass:"btn btn-outline-secondary btn-sm btn-block",attrs:{type:"button"},on:{click:t.updProduct}},[t._v("Update")]):t._e(),"upd"===t.mode?o("button",{staticClass:"btn btn-outline-secondary btn-sm btn-block",attrs:{type:"button"},on:{click:t.cancelUpd}},[t._v("Cancel")]):t._e()])]):t._e(),o("div",{staticClass:"col",staticStyle:{margin:"50px 0px 50px 50px"}},[o("h3",[t._v("All products")]),o("listitems",{attrs:{isAdmin:t.isAdmin,items:t.items,isLogin:t.isLogin},on:{atc:t.atc,deleteItem:t.deleteItem,updateItem:t.updateItem}})],1)],1)],1)])])},i=[],a=(o("7f7f"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[0===t.items.length?o("div",[t._v("\n    Product Is Not Exists\n  ")]):t._e(),0!==t.items.length?o("div",[o("div",{staticClass:"row",staticStyle:{"align-items":"stretch"}},t._l(t.items,function(e){return o("div",{key:e._id,staticClass:"col-sm-6 col-md-3 col-lg-2-"},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-body"},[o("h5",{staticClass:"card-title"},[t._v(t._s(e.name))]),o("h6",{staticClass:"card-subtitle text-muted"},[t._v(" $"+t._s(e.price))])]),o("img",{staticStyle:{height:"200px",width:"100%",display:"block"},attrs:{src:e.image,alt:"Card image"}}),o("div",{staticClass:"card-body"},[o("p",{staticClass:"card-text"},[t._v(t._s(e.description))]),e.stock>0?o("p",{staticClass:"card-text"},[t._v(" "+t._s(e.stock)+" left ")]):t._e(),e.stock<=0?o("p",{staticClass:"card-text"},[t._v(" Stock Empty ")]):t._e()]),!1===t.isAdmin?o("div",{staticClass:"card-body"},[t.isLogin?o("a",{staticClass:"card-link",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.atc(e)}}},[t._v("Add to Cart")]):t._e(),!1===t.isLogin?o("router-link",{staticClass:"card-link",attrs:{to:"/join"}},[t._v("Shop Now")]):t._e()],1):t._e(),!0===t.isAdmin?o("div",{staticClass:"card-footer text-muted"},[o("a",{staticClass:"card-link",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.del(e._id)}}},[t._v("Delete")]),o("a",{staticClass:"card-link",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.upd(e)}}},[t._v("Edit")])]):t._e()])])}),0)]):t._e()])}),c=[],r={name:"listitems",props:["isLogin","isAdmin","items"],data:function(){return{}},mounted:function(){},methods:{atc:function(t){this.$emit("atc",t)},del:function(t){this.$emit("deleteItem",t)},upd:function(t){this.$emit("updateItem",t)}}},n=r,d=o("2877"),u=Object(d["a"])(n,a,c,!1,null,null,null),l=u.exports,p=o("1940"),m=o.n(p),g={name:"Product",props:["isLogin","userId","isAdmin"],data:function(){return{items:[],product:{_id:"",name:"",image:"",price:null,stock:null,description:""},mode:"add"}},created:function(){this.populateItem()},components:{listitems:l},methods:{atc:function(t){console.log(t,"di product"),this.$emit("atc",t)},deleteItem:function(t){var e=this;console.log(t,"delete di parent"),m()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this product data!",icon:"warning",buttons:!0,dangerMode:!0}).then(function(o){o?(console.log("jadi ngehapus"),e.$axios({method:"delete",url:"http://35.240.223.244:3000/product/"+t,headers:{token:localStorage.getItem("token"),id:localStorage.getItem("user")}}).then(function(t){t.data;m()("Successfully delete product",{icon:"success"}),e.populateItem()}).catch(function(t){var o=t.response;console.log(o),e.$swal("Error Status ".concat(o.status),"".concat(o.data.message),"error")})):(m()("Cancelling your action...",{buttons:!1,timer:2e3}),e.populateItem())})},updateItem:function(t){console.log(t,"di parent"),this.mode="upd",this.product=t,this.product.image="",this.populateItem()},updProduct:function(){var t=this;console.log("disini"),""===this.product.image?this.$axios({method:"put",url:"http://35.240.223.244:3000/product/"+this.product._id,headers:{token:localStorage.getItem("token"),id:localStorage.getItem("user")},data:{name:this.product.name,price:this.product.price,stock:this.product.stock,description:this.product.description}}).then(function(e){e.response;t.$swal("Product Updated","produc successfully updated","success"),t.cancelUpd(),t.populateItem()}).catch(function(e){var o=e.response;t.$swal("Error Status : "+String(o.status),o.data.message,"error"),t.cancelUpd(),t.populateItem()}):""===this.product.name||""===this.product.image||null===this.product.price||this.product.price<=0||null===this.product.stock||this.product.stock<0||""===this.product.description?this.$swal("Please input valid product info"):m()("Upload Your Image...",{buttons:!1,timer:3500})},cancelUpd:function(){this.product.name="",this.product.image="",this.product.price=null,this.product.stock=null,this.product.description="",this.mode="add"},populateItem:function(){var t=this;this.$axios({method:"get",url:"http://35.240.223.244/products",headers:{id:localStorage.getItem("user"),token:localStorage.getItem("token")}}).then(function(e){var o=e.data;t.items=o}).catch(function(e){console.log(JSON.stringify(e)),t.$swal("".concat(response.status),response.data.message,"error")})},newProduct:function(){var t=this;if(console.log("input produk"),null===this.product.image)this.$swal("Please add product image");else if(""===this.product.name||""===this.product.image||null===this.product.price||this.product.price<=0||null===this.product.stock||this.product.stock<0||""===this.product.description)this.$swal("Please input valid product ino");else{m()("Upload Your Image...",{buttons:!1,timer:3500});var e=new Blob([this.product.image],{type:this.product.image.type}),o=new FormData;o.append("image",e),this.$axios({method:"post",url:"http://35.240.223.244/uploadimg",headers:{token:localStorage.getItem("token"),id:localStorage.getItem("user")},data:o}).then(function(e){var o=e.data;t.product.image=o,m()("Adding new Product to database...",{buttons:!1,timer:3500}),t.$axios({method:"post",url:"http://35.240.223.244/product",headers:{id:localStorage.getItem("user"),token:localStorage.getItem("token")},data:{name:t.product.name,image:t.product.image,price:t.product.price,stock:t.product.stock,description:t.product.description}}).then(function(e){var o=e.data;t.cancelUpd(),console.log("created => "+JSON.stringify(o)),t.$swal("Success","Product Added","success"),t.populateItem()}).catch(function(e){console.log("error di db"),t.cancelUpd(),console.log(e)})}).catch(function(e){var o=e.response;t.cancelUpd(),t.$swal("Error Status : "+String(o.status),o.data.message,"error")})}},previewFile:function(t){this.product.image=t.target.files[0],console.log(this.product.image)}}},h=g,v=Object(d["a"])(h,s,i,!1,null,null,null);e["default"]=v.exports}}]);
//# sourceMappingURL=products.9be7d4c6.js.map