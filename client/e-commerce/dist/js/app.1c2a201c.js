(function(t){function e(e){for(var a,i,n=e[0],l=e[1],c=e[2],u=0,m=[];u<n.length;u++)i=n[u],s[i]&&m.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,i=1;i<r.length;i++){var l=r[i];0!==s[l]&&(a=!1)}a&&(o.splice(e--,1),t=n(n.s=r[0]))}return t}var a={},s={app:0},o=[];function i(t){return n.p+"js/"+({"products~transactions":"products~transactions",products:"products",transactions:"transactions"}[t]||t)+"."+{"products~transactions":"f283aedd",products:"9be7d4c6",transactions:"a4e42612"}[t]+".js"}function n(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.e=function(t){var e=[],r=s[t];if(0!==r)if(r)e.push(r[2]);else{var a=new Promise(function(e,a){r=s[t]=[e,a]});e.push(r[2]=a);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.src=i(t),o=function(e){l.onerror=l.onload=null,clearTimeout(c);var r=s[t];if(0!==r){if(r){var a=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+a+": "+o+")");i.type=a,i.request=o,r[1](i)}s[t]=void 0}};var c=setTimeout(function(){o({type:"timeout",target:l})},12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(e)},n.m=t,n.c=a,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("b-modal",{ref:"my-modal",attrs:{"hide-footer":"",title:"Shopping Cart"}},[r("div",{staticClass:"d-block text-center"},[t.carts.length>0?r("ul",{staticClass:"list-group"},t._l(t.carts,function(e){return r("li",{key:e.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[r("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.image}}),t._v("\n          "+t._s(e.name)+"\n          "),r("br"),t._v("\n          total $ "+t._s(e.amount)+" - "+t._s(e.total)+" item\n          "),r("br"),t._v("\n          price $ "+t._s(e.price)+" per ring\n          "),r("b-button",{on:{click:function(r){return t.removeItem(e.id)}}},[t._v("remove")])],1)}),0):t._e(),t.carts.length<1?r("h3",[t._v("Your cart is empty")]):t._e()]),r("b-button",{staticClass:"mt-2",attrs:{variant:"outline-secondary",block:""},on:{click:t.hideModalCart}},[t._v("Close")]),t.carts.length>0&&!1===t.checkoutStat?r("b-button",{staticClass:"mt-2",attrs:{variant:"outline-success",block:""},on:{click:t.co}},[t._v("Checkout")]):t._e(),t.checkoutStat?r("div",[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"email"}},[t._v("Email address")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.userDetail.email,expression:"userDetail.email"}],staticClass:"form-control",attrs:{type:"email",id:"email","aria-describedby":"emailHelp",placeholder:"Enter email"},domProps:{value:t.userDetail.email},on:{input:function(e){e.target.composing||t.$set(t.userDetail,"email",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"phonenumber"}},[t._v("Phone Number")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.userDetail.phonenumber,expression:"userDetail.phonenumber"}],staticClass:"form-control",attrs:{type:"text",id:"phonenumber",placeholder:"Enter phone number"},domProps:{value:t.userDetail.phonenumber},on:{input:function(e){e.target.composing||t.$set(t.userDetail,"phonenumber",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"address"}},[t._v("Addres")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.userDetail.address,expression:"userDetail.address"}],staticClass:"form-control",attrs:{type:"text",id:"address",placeholder:"Enter shipping address"},domProps:{value:t.userDetail.address},on:{input:function(e){e.target.composing||t.$set(t.userDetail,"address",e.target.value)}}})]),r("b-button",{staticClass:"mt-2",attrs:{variant:"outline-success",block:""},on:{click:t.checkout}},[t._v("Order")])],1):t._e()],1),r("nav",{staticClass:"navbar navbar-expand-sm navbar-dark bg-primary"},[r("ul",{staticClass:"navbar-nav mr-auto"},[t._m(0),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("Home")])],1),r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/products"}},[t._v("Products")])],1),!0===t.isLogin&&"no user"!==t.userId?r("li",{staticClass:"nav-item"},[r("router-link",{staticClass:"nav-link",attrs:{to:"/transactions"}},[t._v("Transactions")])],1):t._e(),"5ce158d52edb972b1e4dc5c4"!==t.userId?r("li",{staticClass:"nav-item"},[r("a",{staticClass:"nav-link",on:{click:t.showModalCart}},[t._v("\n          Cart\n          "),r("span",{staticClass:"badge badge badge-light"},[t._v(t._s(t.cartItems))])])]):t._e(),r("li",{staticClass:"nav-item"},[!1===t.isLogin&&"no user"===t.userId?r("router-link",{staticClass:"nav-link",attrs:{to:"/join"}},[t._v("join us to start shopping")]):t._e()],1),r("li",{staticClass:"nav-item"},[!0===t.isLogin?r("a",{staticClass:"nav-link",on:{click:t.logout}},[t._v("Log Out")]):t._e()])])]),r("div",[r("router-view",{attrs:{isLogin:t.isLogin,userId:t.userId,isAdmin:t.isAdmin},on:{atc:t.atc,login:t.login}})],1),r("footer")],1)},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"navbar-brand"},[t._v("\n        Jewelries\n        "),r("i",{staticClass:"far fa-gem"})])}],i=(r("ac6a"),{name:"app",data:function(){return{isLogin:!1,userId:"no user",userDetail:{address:"",phonenumber:"",email:localStorage.getItem("email")},carts:[],cartItems:0,isAdmin:!1,checkoutStat:!1}},created:function(){this.checkLogin()},mounted:function(){this.checkLogin()},methods:{sumCart:function(){var t=0;this.carts.forEach(function(e){t+=e.total}),this.cartItems=t},co:function(){this.checkoutStat=!0},checkout:function(){var t=this;this.hideModalCart();var e=0,r=0;this.carts.forEach(function(t){e+=t.amount,r+=t.total});var a={products:this.carts,amount:e,total:r,transfer:"",status:"wait for payment",userId:localStorage.getItem("user"),userDetail:this.userDetail};this.$axios({method:"post",url:"http://35.240.223.244/cart",headers:{id:localStorage.getItem("user"),token:localStorage.getItem("token")},data:a}).then(function(e){e.data;t.carts=[],t.updateCart("wkwk"),t.userDetail={address:"",phonenumber:"",email:localStorage.getItem("email")},t.$swal("Order submitted","Transfer to 123456789 and sent the transfer receipt in the transactions dashboard, click the transaction menu on the navbar and upload your picture","success")}).catch(function(e){var r=e.response;t.$swal(r.status,r.data.message,"error")})},updateCart:function(t){var e=this;this.$axios({method:"put",url:"http://35.240.223.244/user/"+this.userId,headers:{token:localStorage.getItem("token"),id:localStorage.getItem("user")},data:{cart:this.carts}}).then(function(r){r.data;"add"===t?e.$swal("Addedd to cart","Added item to cart","success"):"upd"===t&&e.$swal("Item deleted","Deleted item from cart","success"),e.sumCart()}).catch(function(t){e.$swal("Error","".concat(t),"error")})},atc:function(t){if(this.carts.length<1)this.carts.push(t),this.carts[0].total=1,this.carts[0].amount=t.price;else{for(var e=!1,r=this.carts.length,a=0;a<this.carts.length;a++)this.carts[a]._id===t._id&&(this.carts[a].total+=1,this.carts[a].amount+=t.price,e=!0);!1===e&&(this.carts.push(t),this.carts[r].total=1,this.carts[r].amount=t.price)}this.updateCart("add"),console.log(this.carts)},login:function(t){this.isLogin=t.isLogin,this.userId=t.userId,this.cart=t.cart,this.checkLogin()},logout:function(){this.carts=[],this.isLogin=!1,this.userId="no user",localStorage.removeItem("token"),localStorage.removeItem("email"),localStorage.removeItem("_id"),this.checkLogin(),this.$router.push("/")},showModalCart:function(){this.$refs["my-modal"].show()},hideModalCart:function(){this.$refs["my-modal"].hide(),this.checkoutStat=!1},getCartItem:function(){var t=this;this.$axios({method:"get",url:"http://35.240.223.244/user/"+this.userId,headers:{id:localStorage.getItem("user"),token:localStorage.getItem("token")}}).then(function(e){var r=e.data;t.carts=r.cart,t.sumCart()}).catch(function(e){var r=e.response;console.log(r),t.$swal("Error Status : ".concat(r.status),"".concat(r.data.message),"error")})},checkLogin:function(){if(localStorage.getItem("token")){this.isLogin=!0,this.userId=localStorage.getItem("user");var t=localStorage.getItem("user");this.getCartItem(),"5ce158d52edb972b1e4dc5c4"===t&&(this.isAdmin=!0)}else this.isLogin=!1,this.isAdmin=!1,this.userId="no user"},removeItem:function(t){var e=this.carts;e.forEach(function(r,a){r.id===t&&e.splice(a,1)}),this.carts=e,this.updateCart("del")}}}),n=i,l=r("2877"),c=Object(l["a"])(n,s,o,!1,null,null,null),u=c.exports,d=r("8c4f"),m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[r("img",{staticStyle:{"max-width":"100%",height:"auto"},attrs:{src:"https://media.timeout.com/images/101828539/image.jpg",alt:""}}),r("div",{staticStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},[r("b-jumbotron",{staticStyle:{"background-color":"rgba(255, 255, 255, 0.6)"},attrs:{header:"Lux Jewelries"}},[r("h1",[r("router-link",{attrs:{to:"/products"}},[t._v("Shop Now")])],1)])],1)])])},p=[],h={name:"home",props:["isLogin","userId"],data:function(){return{}}},g=h,v=Object(l["a"])(g,m,p,!1,null,null,null),f=v.exports,b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("b-container",[r("b-row",{staticClass:"row",staticStyle:{"justify-content":"space-between"}},[t.showregister?r("b-col",{staticClass:"col",staticStyle:{border:"lightgrey medium solid",padding:"10px"}},[r("br"),r("br"),r("center",[r("p",[t._v("New to Us?")]),r("h3",[t._v("Register")])]),r("br"),r("br"),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"emailregister"}},[t._v("Email address")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.emailregister,expression:"emailregister"}],staticClass:"form-control",attrs:{type:"email",id:"emailregister","aria-describedby":"emailHelp",placeholder:"Enter email"},domProps:{value:t.emailregister},on:{input:function(e){e.target.composing||(t.emailregister=e.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"emailHelp"}},[t._v("We'll never share your email with anyone else.")])]),r("br"),r("br"),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"passwordregister"}},[t._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordregister,expression:"passwordregister"}],staticClass:"form-control",attrs:{type:"password",id:"passwordregister",placeholder:"Password"},domProps:{value:t.passwordregister},on:{input:function(e){e.target.composing||(t.passwordregister=e.target.value)}}})]),r("div",[r("br"),r("button",{staticClass:"btn btn-outline-secondary btn-md btn-block",attrs:{type:"button"},on:{click:t.register}},[t._v("Register")])]),r("br")],1):t._e(),t.showregister?r("b-col",{staticClass:"col-1"}):t._e(),r("b-col",{staticClass:"col",staticStyle:{border:"grey medium solid",padding:"10px"}},[r("br"),r("br"),r("center",[r("p",[t._v("Have an account?")]),r("h3",[t._v("Login")])]),r("br"),r("br"),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"emaillogin"}},[t._v("Email address")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.emaillogin,expression:"emaillogin"}],staticClass:"form-control",attrs:{type:"email",id:"emaillogin","aria-describedby":"emailHelp",placeholder:"Enter email"},domProps:{value:t.emaillogin},on:{input:function(e){e.target.composing||(t.emaillogin=e.target.value)}}})]),r("br"),r("br"),r("br"),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"passwordlogin"}},[t._v("Password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.passwordlogin,expression:"passwordlogin"}],staticClass:"form-control",attrs:{type:"password",id:"passwordlogin",placeholder:"Enter password"},domProps:{value:t.passwordlogin},on:{input:function(e){e.target.composing||(t.passwordlogin=e.target.value)}}})]),r("div",[r("br"),r("button",{staticClass:"btn btn-primary btn-md btn-block",attrs:{type:"button"},on:{click:t.login}},[t._v("Login")])])],1)],1)],1)],1)},w=[],_={name:"LoginRegister",props:["isLogin","userId"],data:function(){return{emaillogin:"",passwordlogin:"",emailregister:"",passwordregister:"",showregister:!0}},mounted:function(){},methods:{login:function(){var t=this;this.$axios({method:"post",url:"http://35.240.223.244/login",data:{email:this.emaillogin,password:this.passwordlogin}}).then(function(e){var r=e.data;t.emaillogin="",t.passwordlogin="",localStorage.setItem("token",r.token),localStorage.setItem("user",r._id),localStorage.setItem("email",r.email),t.$emit("login",{isLogin:!0,userId:r._id,cart:r.cart}),t.$router.push("/")}).catch(function(e){t.$swal("Error",e.response.data.message,"error"),console.log(e.response)})},register:function(){var t=this;console.log("register");var e=/^(([^<>()\[\]\.,;:\s@"]+(\.[^<>()\[\]\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(this.emailregister.length>=8&&!0===e.test(this.emailregister.toLowerCase())&&""!==this.emailregister)this.$axios({method:"post",url:"http://35.240.223.244/register",data:{email:this.emailregister,password:this.passwordregister,cart:[]}}).then(function(e){e.data;t.$swal("Account Created","Successfully created account ".concat(t.emailregister),"success"),t.emaillogin=t.emailregister,t.emailregister="",t.passwordregister="",t.showregister=!1}).catch(function(e){t.$swal("Error",e.response.data.message,"error")});else{var r=!0,a=!0;this.passwordregister.length<8&&(a=!1),!1===e.test(this.emailregister.toLowerCase())&&(r=!1);var s="Error : ";!1===a&&(s+="\n\n   **password must be 8 character or more** "),!1===r&&(s+="\n\n   **please input a valid email address** "),this.$swal("Error",s,"error")}}}},C=_,y=Object(l["a"])(C,b,w,!1,null,null,null),k=y.exports;a["default"].use(d["a"]);var I=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:f},{path:"/join",name:"join",component:k},{path:"/products",name:"products",component:function(){return Promise.all([r.e("products~transactions"),r.e("products")]).then(r.bind(null,"d2f1"))}},{path:"/transactions",name:"transactions",component:function(){return Promise.all([r.e("products~transactions"),r.e("transactions")]).then(r.bind(null,"0d43"))}}]}),S=(r("2dd8"),r("9f7b")),x=r.n(S),$=r("eba3"),L=r.n($),E=r("bc3a"),P=r.n(E);a["default"].prototype.$axios=P.a,a["default"].use(x.a),a["default"].use(L.a),a["default"].config.productionTip=!1,new a["default"]({router:I,render:function(t){return t(u)}}).$mount("#app")}});
//# sourceMappingURL=app.1c2a201c.js.map